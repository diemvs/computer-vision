
---

### **Задание 1. Реализация оптического потока методом Лукаса–Канаде**
1. Считать видеопоследовательность (например, `video.mp4`) или загрузить последовательность кадров.
2. Выделить ключевые точки на первом кадре с использованием алгоритма Shi-Tomasi (функция `cv2.goodFeaturesToTrack`).
3. Реализовать отслеживание этих точек с помощью функции `cv2.calcOpticalFlowPyrLK`.
4. Визуализировать полученные траектории: нарисовать линии движения и отметить точки на каждом кадре.
5. Изучить, как изменение параметров (размер окна, число уровней пирамиды, критерии остановки) влияет на стабильность и точность отслеживания.

---

### **Задание 2. Вычисление плотного оптического потока методом Фарнебека**
1. Считать видеопоследовательность и преобразовать кадры в оттенки серого.
2. Применить функцию `cv2.calcOpticalFlowFarneback` для вычисления плотного поля оптического потока.
3. Визуализировать результаты: построить цветовую карту (преобразовав в полярные координаты и используя цветовое пространство HSV).
4. Экспериментировать с параметрами алгоритма: `pyr_scale`, `levels`, `winsize`, `poly_n`, `poly_sigma`.
5. Сравнить полученные результаты, обсудить, какие параметры дают наилучшее разделение движущихся объектов от статического фона.

---

### **Задание 3. Сравнение классических методов оптического потока**
1. Используя один и тот же набор кадров, реализуйте два подхода:
   - Точечный оптический поток (метод Лукаса–Канаде).
   - Плотный оптический поток (метод Фарнебека).
2. Для каждого метода:
   - Визуализируйте результаты (отслеживание точек и/или цветовую карту плотного поля).
   - Замерьте время выполнения (например, с помощью `cv2.getTickCount()`).
3. Сравните результаты по качеству и скорости. Обсудите, в каких случаях один метод предпочтительнее другого.

---

### **Задание 4. Визуализация оптического потока и анализ ошибок**
1. Считать видео или серию кадров, на которых наблюдается однородное движение.
2. Вычислить плотное поле оптического потока (с использованием метода Фарнебека).
3. Визуализировать полученное поле, используя преобразование в полярные координаты и цветовую кодировку (например, с помощью функции `cv2.cartToPolar`).
4. Если имеется эталонное (ground truth) поле или можно синтезировать тестовый пример, вычислите метрики (например, среднюю угловую ошибку, MSE) между полученным и истинным потоком.
5. Обсудите, какие регионы изображения дают наибольшую ошибку и почему (учтите влияние градиентов, текстуры и шумов).

---

### **Задание 5. Анализ влияния параметров пирамидального подхода**
1. Считать видеопоследовательность и реализовать метод Фарнебека с пирамидальным подходом.
2. Провести эксперименты, изменяя:
   - Количество уровней пирамиды.
   - Коэффициент масштабирования (`pyr_scale`).
   - Размер окна (`winsize`).
3. Для каждого варианта визуализировать поле оптического потока и замерить время обработки.
4. Составить таблицу результатов и график зависимости качества (визуально и по метрикам, если применимо) от параметров.
5. Обсудить, какие параметры оптимальны для обработки видео с большими смещениями и почему.

---

### **Задание 6. Применение оптического потока для стабилизации видео**
1. Выбрать видеозапись с заметными дрожаниями камеры.
2. Вычислить плотное поле оптического потока между последовательными кадрами (например, методом Фарнебека).
3. Разработать алгоритм компенсации движения:
   - Определить глобальное смещение (среднее значение потока) для каждого кадра.
   - Применить обратное преобразование (например, сдвиг или аффинное преобразование) для стабилизации изображения.
4. Сравнить исходное видео с результатом стабилизации.
5. Обсудить преимущества и недостатки используемого метода стабилизации.

---

### **Задание 7. Детектирование движущихся объектов с использованием оптического потока**
1. Считать видео с динамичной сценой, где присутствуют движущиеся и статичные объекты.
2. Применить алгоритм вычитания фона (например, `cv2.createBackgroundSubtractorMOG2`) для получения бинарной маски движущихся объектов.
3. Вычислить плотное поле оптического потока и наложить его на бинарную маску.
4. Проанализировать, насколько оптический поток помогает уточнить границы движущихся объектов.
5. Обсудить, как можно комбинировать методы оптического потока и вычитания фона для повышения точности детектирования.

---

### **Задание 8. Измерение производительности алгоритмов оптического потока**
1. Выбрать видеопоследовательность или большое изображение (HD или выше).
2. Последовательно применить:
   - Метод Лукаса–Канаде (точечный оптический поток).
   - Метод Фарнебека (плотный оптический поток).
   - (Если доступно) Нейросетевой метод (например, PWC-Net) – на тестовом наборе данных.
3. Для каждого метода замерить время выполнения (с использованием `cv2.getTickCount()` или аналогов) и оценить вычислительные затраты.
4. Составить сравнительную таблицу и график зависимости времени обработки от количества кадров или разрешения.
5. Сделать выводы о вычислительной сложности каждого метода и их применимости в реальном времени.

---

### **Задание 9. Анализ устойчивости оптического потока к шуму**
1. Считать чистое видео или изображение.
2. Искусственно добавить к каждому кадру шум (например, гауссовский шум или «соль и перец»).
3. Вычислить оптический поток (например, методом Фарнебека) для оригинального и зашумленного видео.
4. Визуально сравнить поля оптического потока и вычислить метрики (например, MSE или угол ошибки) между ними.
5. Обсудить, как шум влияет на качество оценки оптического потока и какие методы предобработки можно применить для повышения устойчивости.

---

### **Задание 10. Применение нейросетевых методов для оценки оптического потока**
1. Загрузить предварительно обученную модель (например, PWC-Net или FlowNet) из открытого репозитория.
2. Считать видеопоследовательность или пару последовательных кадров.
3. Преобразовать данные в формат, подходящий для модели (нормализация, изменение размера и т.д.).
4. Пропустить кадры через сеть для получения плотного поля оптического потока.
5. Визуализировать результаты (цветовая карта) и сравнить с результатами, полученными классическими методами.
6. Провести обсуждение: какие преимущества и недостатки нейросетевых методов, как они справляются с трудными сценами и какие требования предъявляются к обучающим данным.

